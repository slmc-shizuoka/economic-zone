<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æœ€å¼·çµŒæ¸ˆåœ</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Orbitron:wght@400;600;700;800;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-primary: #05050d;
  --bg-secondary: #0c0c1a;
  --bg-card: rgba(15,15,35,0.85);
  --bg-card-hover: rgba(25,25,55,0.9);
  --text-primary: #f0f0ff;
  --text-secondary: #9999cc;
  --text-muted: #5555aa;
  --border-color: rgba(100,80,255,0.15);
  --glow-purple: rgba(140,80,255,0.5);
  --glow-cyan: rgba(0,220,255,0.5);
  --glow-gold: rgba(255,200,0,0.5);

â€“docomo-primary: #ff1744;
â€“docomo-light: #ff5577;
â€“docomo-glow: rgba(255,23,68,0.4);
â€“docomo-bg: rgba(255,23,68,0.1);

â€“au-primary: #ff6d00;
â€“au-light: #ffaa33;
â€“au-glow: rgba(255,109,0,0.4);
â€“au-bg: rgba(255,109,0,0.1);

â€“paypay-primary: #ff0044;
â€“paypay-light: #ff4477;
â€“paypay-glow: rgba(255,0,68,0.4);
â€“paypay-bg: rgba(255,0,68,0.1);

â€“rakuten-primary: #e00000;
â€“rakuten-light: #ff3333;
â€“rakuten-glow: rgba(224,0,0,0.4);
â€“rakuten-bg: rgba(224,0,0,0.1);

â€“vpoint-primary: #00e676;
â€“vpoint-light: #66ffaa;
â€“vpoint-glow: rgba(0,230,118,0.4);
â€“vpoint-bg: rgba(0,230,118,0.1);
}

- { margin:0; padding:0; box-sizing:border-box; }

body {
font-family: â€˜Noto Sans JPâ€™, â€˜Rajdhaniâ€™, sans-serif;
background: var(â€“bg-primary);
color: var(â€“text-primary);
min-height: 100vh;
overflow-x: hidden;
}

/* ============ ANIMATED BACKGROUND ============ */
.bg-effects {
position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden;
}
.bg-effects::before {
content:â€™â€™;
position:absolute;
width:200vw; height:200vh;
top:-50vh; left:-50vw;
background:
radial-gradient(ellipse 40% 30% at 15% 15%, rgba(140,80,255,0.12) 0%, transparent 60%),
radial-gradient(ellipse 35% 25% at 85% 20%, rgba(0,220,255,0.1) 0%, transparent 60%),
radial-gradient(ellipse 45% 35% at 50% 80%, rgba(255,60,100,0.08) 0%, transparent 60%),
radial-gradient(ellipse 30% 30% at 70% 60%, rgba(255,200,0,0.06) 0%, transparent 60%);
animation: bgDrift 20s ease-in-out infinite alternate;
}
@keyframes bgDrift {
0% { transform: translate(0,0) rotate(0deg); }
100% { transform: translate(-3%,2%) rotate(2deg); }
}

/* Grid lines overlay */
.bg-grid {
position:fixed; inset:0; z-index:0; pointer-events:none;
background-image:
linear-gradient(rgba(100,80,255,0.03) 1px, transparent 1px),
linear-gradient(90deg, rgba(100,80,255,0.03) 1px, transparent 1px);
background-size: 60px 60px;
}

/* Floating particles */
.particle {
position:fixed;
border-radius:50%;
pointer-events:none;
z-index:0;
animation: floatParticle linear infinite;
}
@keyframes floatParticle {
0% { transform: translateY(100vh) scale(0); opacity:0; }
10% { opacity:1; }
90% { opacity:1; }
100% { transform: translateY(-20vh) scale(1); opacity:0; }
}

.app-container {
position:relative; z-index:1;
max-width:1320px;
margin:0 auto;
padding:20px 16px 80px;
}

/* ============ HEADER ============ */
.app-header {
text-align:center;
padding:48px 0 40px;
position:relative;
}
.app-header::before {
content:â€™â€™;
position:absolute;
top:20px; left:50%; transform:translateX(-50%);
width:500px; height:120px;
background: radial-gradient(ellipse, rgba(140,80,255,0.2), transparent 70%);
filter:blur(40px);
pointer-events:none;
}

.title-badge {
display:inline-block;
background: linear-gradient(135deg, rgba(140,80,255,0.15), rgba(0,220,255,0.1));
border:1px solid rgba(140,80,255,0.3);
border-radius:50px;
padding:6px 20px;
font-size:0.72rem;
font-weight:600;
color:var(â€“text-secondary);
letter-spacing:0.15em;
text-transform:uppercase;
margin-bottom:16px;
backdrop-filter:blur(10px);
}

.app-header h1 {
font-family:â€˜Orbitronâ€™,sans-serif;
font-weight:900;
font-size:clamp(2.4rem,6vw,4.2rem);
letter-spacing:0.04em;
line-height:1.1;
position:relative;
display:inline-block;
}
.app-header h1 .title-main {
background: linear-gradient(135deg, #ff6b9d, #c084fc, #60a5fa, #34d399, #fbbf24);
background-size:300% 300%;
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
background-clip:text;
animation: gradientShift 4s ease infinite;
}
@keyframes gradientShift {
0%,100% { background-position:0% 50%; }
50% { background-position:100% 50%; }
}
.app-header h1 .title-glow {
position:absolute;
inset:0;
background: linear-gradient(135deg, #ff6b9d, #c084fc, #60a5fa, #34d399, #fbbf24);
background-size:300% 300%;
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
background-clip:text;
animation: gradientShift 4s ease infinite;
filter:blur(30px);
opacity:0.5;
pointer-events:none;
}
.app-header .subtitle {
color:var(â€“text-secondary);
font-size:0.95rem;
font-weight:300;
max-width:620px;
margin:16px auto 0;
line-height:1.8;
}
.subtitle .highlight {
color:#c084fc;
font-weight:500;
}

/* ============ MONTHLY INPUT ============ */
.monthly-section {
background: var(â€“bg-card);
border:1px solid var(â€“border-color);
border-radius:20px;
padding:28px 32px;
margin-bottom:32px;
display:flex;
flex-wrap:wrap;
gap:16px 32px;
align-items:center;
backdrop-filter:blur(20px);
position:relative;
overflow:hidden;
}
.monthly-section::before {
content:â€™â€™;
position:absolute;
top:-1px; left:0; right:0; height:2px;
background: linear-gradient(90deg, transparent, rgba(140,80,255,0.5), rgba(0,220,255,0.5), transparent);
}
.monthly-section .section-label {
font-family:â€˜Orbitronâ€™,sans-serif;
font-weight:700;
font-size:0.7rem;
color:var(â€“text-secondary);
letter-spacing:0.12em;
text-transform:uppercase;
width:100%;
margin-bottom:4px;
display:flex;
align-items:center;
gap:10px;
}
.section-label .icon { font-size:1.2rem; }
.input-group {
display:flex;
flex-direction:column;
gap:5px;
}
.input-group label {
font-size:0.72rem;
color:var(â€“text-muted);
font-weight:600;
letter-spacing:0.03em;
}
.input-group input {
background:rgba(20,20,50,0.8);
border:1px solid rgba(100,80,255,0.2);
border-radius:12px;
padding:12px 16px;
color:#c084fc;
font-size:1.05rem;
font-family:â€˜Rajdhaniâ€™,â€˜Noto Sans JPâ€™,sans-serif;
font-weight:600;
width:180px;
transition:all 0.3s;
}
.input-group input:focus {
outline:none;
border-color:rgba(140,80,255,0.6);
box-shadow:0 0 20px rgba(140,80,255,0.15), inset 0 0 20px rgba(140,80,255,0.05);
}
.input-group .unit {
font-size:0.72rem;
color:var(â€“text-muted);
}

/* ============ TAB NAVIGATION ============ */
.tab-nav {
display:flex;
gap:8px;
margin-bottom:28px;
overflow-x:auto;
padding-bottom:4px;
-webkit-overflow-scrolling:touch;
}
.tab-btn {
flex-shrink:0;
padding:14px 24px;
border-radius:14px;
border:1px solid var(â€“border-color);
background:var(â€“bg-card);
color:var(â€“text-secondary);
font-family:â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.88rem;
font-weight:700;
cursor:pointer;
transition:all 0.3s;
display:flex;
align-items:center;
gap:10px;
white-space:nowrap;
backdrop-filter:blur(10px);
position:relative;
overflow:hidden;
}
.tab-btn::before {
content:â€™â€™;
position:absolute;
inset:0;
opacity:0;
transition:opacity 0.3s;
border-radius:14px;
}
.tab-btn:hover { transform:translateY(-2px); }

.tab-btn.active { transform:translateY(-2px); }
.tab-btn.active::before { opacity:1; }

.tab-btn.active[data-eco=â€œdocomoâ€] { border-color:var(â€“docomo-primary); color:var(â€“docomo-light); box-shadow:0 4px 25px var(â€“docomo-glow), inset 0 0 30px rgba(255,23,68,0.05); }
.tab-btn.active[data-eco=â€œdocomoâ€]::before { background:var(â€“docomo-bg); }
.tab-btn.active[data-eco=â€œauâ€] { border-color:var(â€“au-primary); color:var(â€“au-light); box-shadow:0 4px 25px var(â€“au-glow), inset 0 0 30px rgba(255,109,0,0.05); }
.tab-btn.active[data-eco=â€œauâ€]::before { background:var(â€“au-bg); }
.tab-btn.active[data-eco=â€œpaypayâ€] { border-color:var(â€“paypay-primary); color:var(â€“paypay-light); box-shadow:0 4px 25px var(â€“paypay-glow), inset 0 0 30px rgba(255,0,68,0.05); }
.tab-btn.active[data-eco=â€œpaypayâ€]::before { background:var(â€“paypay-bg); }
.tab-btn.active[data-eco=â€œrakutenâ€] { border-color:var(â€“rakuten-primary); color:var(â€“rakuten-light); box-shadow:0 4px 25px var(â€“rakuten-glow), inset 0 0 30px rgba(224,0,0,0.05); }
.tab-btn.active[data-eco=â€œrakutenâ€]::before { background:var(â€“rakuten-bg); }
.tab-btn.active[data-eco=â€œvpointâ€] { border-color:var(â€“vpoint-primary); color:var(â€“vpoint-light); box-shadow:0 4px 25px var(â€“vpoint-glow), inset 0 0 30px rgba(0,230,118,0.05); }
.tab-btn.active[data-eco=â€œvpointâ€]::before { background:var(â€“vpoint-bg); }

.tab-btn .eco-dot {
width:12px; height:12px; border-radius:50%;
position:relative;
}
.tab-btn .eco-dot::after {
content:â€™â€™;
position:absolute; inset:-3px;
border-radius:50%;
opacity:0;
transition:opacity 0.3s;
}
.tab-btn.active .eco-dot::after { opacity:1; animation: dotPulse 2s ease-in-out infinite; }
@keyframes dotPulse {
0%,100% { transform:scale(1); opacity:0.5; }
50% { transform:scale(1.8); opacity:0; }
}
.tab-btn[data-eco=â€œdocomoâ€] .eco-dot { background:var(â€“docomo-primary); box-shadow:0 0 8px var(â€“docomo-glow); }
.tab-btn[data-eco=â€œdocomoâ€] .eco-dot::after { background:var(â€“docomo-primary); }
.tab-btn[data-eco=â€œauâ€] .eco-dot { background:var(â€“au-primary); box-shadow:0 0 8px var(â€“au-glow); }
.tab-btn[data-eco=â€œauâ€] .eco-dot::after { background:var(â€“au-primary); }
.tab-btn[data-eco=â€œpaypayâ€] .eco-dot { background:var(â€“paypay-primary); box-shadow:0 0 8px var(â€“paypay-glow); }
.tab-btn[data-eco=â€œpaypayâ€] .eco-dot::after { background:var(â€“paypay-primary); }
.tab-btn[data-eco=â€œrakutenâ€] .eco-dot { background:var(â€“rakuten-primary); box-shadow:0 0 8px var(â€“rakuten-glow); }
.tab-btn[data-eco=â€œrakutenâ€] .eco-dot::after { background:var(â€“rakuten-primary); }
.tab-btn[data-eco=â€œvpointâ€] .eco-dot { background:var(â€“vpoint-primary); box-shadow:0 0 8px var(â€“vpoint-glow); }
.tab-btn[data-eco=â€œvpointâ€] .eco-dot::after { background:var(â€“vpoint-primary); }

/* ============ ECO PANEL ============ */
.eco-panel { display:none; }
.eco-panel.active { display:block; animation: panelIn 0.45s cubic-bezier(0.22,1,0.36,1); }
@keyframes panelIn {
from { opacity:0; transform:translateY(20px) scale(0.98); }
to { opacity:1; transform:translateY(0) scale(1); }
}

.eco-layout {
display:grid;
grid-template-columns: 1fr 1fr;
gap:24px;
}
@media(max-width:880px) { .eco-layout { grid-template-columns:1fr; } }

/* ============ SERVICE CARD ============ */
.service-card {
background:var(â€“bg-card);
border:1px solid var(â€“border-color);
border-radius:20px;
padding:28px;
backdrop-filter:blur(20px);
position:relative;
overflow:hidden;
}
.service-card::before {
content:â€™â€™;
position:absolute;
top:-1px; left:0; right:0; height:2px;
}
[data-eco=â€œdocomoâ€] .service-card::before { background:linear-gradient(90deg, transparent, var(â€“docomo-primary), transparent); }
[data-eco=â€œauâ€] .service-card::before { background:linear-gradient(90deg, transparent, var(â€“au-primary), transparent); }
[data-eco=â€œpaypayâ€] .service-card::before { background:linear-gradient(90deg, transparent, var(â€“paypay-primary), transparent); }
[data-eco=â€œrakutenâ€] .service-card::before { background:linear-gradient(90deg, transparent, var(â€“rakuten-primary), transparent); }
[data-eco=â€œvpointâ€] .service-card::before { background:linear-gradient(90deg, transparent, var(â€“vpoint-primary), transparent); }

.service-card h3 {
font-family:â€˜Orbitronâ€™,â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.68rem;
color:var(â€“text-muted);
font-weight:700;
letter-spacing:0.1em;
text-transform:uppercase;
margin-bottom:20px;
}

.check-item {
display:flex;
align-items:center;
gap:14px;
padding:12px 14px;
border-radius:12px;
cursor:pointer;
transition:all 0.2s;
margin-bottom:4px;
user-select:none;
border:1px solid transparent;
}
.check-item:hover { background:rgba(100,80,255,0.05); border-color:rgba(100,80,255,0.1); }

.check-item input[type=â€œcheckboxâ€] { display:none; }
.check-box {
width:22px; height:22px;
border-radius:7px;
border:2px solid rgba(100,80,255,0.25);
flex-shrink:0;
display:flex;
align-items:center;
justify-content:center;
transition:all 0.3s;
position:relative;
}
.check-item input:checked + .check-box {
border-color: currentColor;
background: currentColor;
box-shadow: 0 0 15px currentColor;
animation: checkPop 0.3s cubic-bezier(0.34,1.56,0.64,1);
}
@keyframes checkPop {
0% { transform:scale(0.7); }
100% { transform:scale(1); }
}
.check-item input:checked + .check-box::after {
content:â€˜âœ“â€™;
color:var(â€“bg-primary);
font-weight:900;
font-size:13px;
}
.check-item .svc-name {
font-size:0.9rem;
font-weight:600;
}
.check-item .svc-desc {
font-size:0.7rem;
color:var(â€“text-muted);
margin-top:2px;
}

[data-eco=â€œdocomoâ€] .check-item { color:var(â€“docomo-light); }
[data-eco=â€œauâ€] .check-item { color:var(â€“au-light); }
[data-eco=â€œpaypayâ€] .check-item { color:var(â€“paypay-light); }
[data-eco=â€œrakutenâ€] .check-item { color:var(â€“rakuten-light); }
[data-eco=â€œvpointâ€] .check-item { color:var(â€“vpoint-light); }

/* ============ RESULT CARD ============ */
.result-card {
background:var(â€“bg-card);
border:1px solid var(â€“border-color);
border-radius:20px;
padding:28px;
position:sticky;
top:20px;
backdrop-filter:blur(20px);
}
.result-card h3 {
font-family:â€˜Orbitronâ€™,â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.68rem;
color:var(â€“text-muted);
font-weight:700;
letter-spacing:0.1em;
text-transform:uppercase;
margin-bottom:24px;
}

.rate-display {
text-align:center;
padding:32px 0;
margin-bottom:24px;
border-radius:16px;
position:relative;
overflow:hidden;
border:1px solid rgba(100,80,255,0.1);
}
.rate-display::before {
content:â€™â€™;
position:absolute; inset:0;
opacity:0.08;
border-radius:16px;
}
[data-eco=â€œdocomoâ€] .rate-display::before { background: radial-gradient(ellipse at center, var(â€“docomo-primary), transparent 70%); }
[data-eco=â€œauâ€] .rate-display::before { background: radial-gradient(ellipse at center, var(â€“au-primary), transparent 70%); }
[data-eco=â€œpaypayâ€] .rate-display::before { background: radial-gradient(ellipse at center, var(â€“paypay-primary), transparent 70%); }
[data-eco=â€œrakutenâ€] .rate-display::before { background: radial-gradient(ellipse at center, var(â€“rakuten-primary), transparent 70%); }
[data-eco=â€œvpointâ€] .rate-display::before { background: radial-gradient(ellipse at center, var(â€“vpoint-primary), transparent 70%); }

.rate-label {
font-size:0.72rem;
color:var(â€“text-secondary);
margin-bottom:10px;
letter-spacing:0.05em;
}
.rate-value {
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:3.8rem;
font-weight:900;
letter-spacing:0.02em;
transition:all 0.4s;
position:relative;
}
.rate-value .pct {
font-size:1.6rem;
font-weight:700;
opacity:0.8;
}
[data-eco=â€œdocomoâ€] .rate-value { color:var(â€“docomo-light); text-shadow:0 0 40px var(â€“docomo-glow); }
[data-eco=â€œauâ€] .rate-value { color:var(â€“au-light); text-shadow:0 0 40px var(â€“au-glow); }
[data-eco=â€œpaypayâ€] .rate-value { color:var(â€“paypay-light); text-shadow:0 0 40px var(â€“paypay-glow); }
[data-eco=â€œrakutenâ€] .rate-value { color:var(â€“rakuten-light); text-shadow:0 0 40px var(â€“rakuten-glow); }
[data-eco=â€œvpointâ€] .rate-value { color:var(â€“vpoint-light); text-shadow:0 0 40px var(â€“vpoint-glow); }

.rate-breakdown {
font-size:0.75rem;
color:var(â€“text-muted);
margin-top:10px;
}

/* Benefits */
.benefits-list {
display:flex;
flex-direction:column;
gap:8px;
margin-bottom:24px;
}
.benefit-item {
display:flex;
align-items:flex-start;
gap:12px;
padding:12px 14px;
background:rgba(15,15,40,0.6);
border:1px solid rgba(100,80,255,0.08);
border-radius:12px;
font-size:0.82rem;
line-height:1.6;
animation: benefitSlide 0.35s cubic-bezier(0.22,1,0.36,1);
transition:border-color 0.2s;
}
.benefit-item:hover { border-color:rgba(100,80,255,0.2); }
@keyframes benefitSlide {
from { opacity:0; transform:translateX(-12px); }
to { opacity:1; transform:translateX(0); }
}
.benefit-item .b-icon { flex-shrink:0; font-size:1.05rem; margin-top:2px; }
.benefit-item .b-text { color:var(â€“text-secondary); }
.benefit-item .b-text strong { color:var(â€“text-primary); font-weight:700; }

/* Annual simulation box */
.annual-box {
background: linear-gradient(135deg, rgba(140,80,255,0.08), rgba(0,220,255,0.05));
border-radius:16px;
padding:22px;
text-align:center;
border:1px solid rgba(140,80,255,0.15);
position:relative;
overflow:hidden;
}
.annual-box::before {
content:â€™â€™;
position:absolute;
top:-1px; left:20%; right:20%; height:1px;
background:linear-gradient(90deg, transparent, rgba(140,80,255,0.4), transparent);
}
.annual-box .annual-label {
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:0.6rem;
color:var(â€“text-muted);
margin-bottom:10px;
text-transform:uppercase;
letter-spacing:0.12em;
font-weight:700;
}
.annual-box .annual-value {
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:2rem;
font-weight:900;
letter-spacing:0.02em;
}
.annual-box .annual-sub {
font-size:0.72rem;
color:var(â€“text-muted);
margin-top:6px;
}

/* ============ COMPARISON SECTION ============ */
.comparison-section {
margin-top:40px;
background:var(â€“bg-card);
border:1px solid var(â€“border-color);
border-radius:20px;
padding:32px;
backdrop-filter:blur(20px);
position:relative;
overflow:hidden;
}
.comparison-section::before {
content:â€™â€™;
position:absolute;
top:-1px; left:0; right:0; height:2px;
background: linear-gradient(90deg, var(â€“docomo-primary), var(â€“au-primary), var(â€“paypay-primary), var(â€“rakuten-primary), var(â€“vpoint-primary));
}
.comparison-section h2 {
font-family:â€˜Orbitronâ€™,â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.72rem;
color:var(â€“text-muted);
font-weight:700;
letter-spacing:0.12em;
text-transform:uppercase;
margin-bottom:28px;
display:flex;
align-items:center;
gap:10px;
}
.comparison-section h2 .icon { font-size:1.2rem; }

.comparison-bars { display:flex; flex-direction:column; gap:16px; }
.comp-row {
display:flex;
align-items:center;
gap:16px;
}
.comp-label {
width:90px;
font-size:0.82rem;
font-weight:700;
flex-shrink:0;
text-align:right;
}
.comp-bar-bg {
flex:1;
height:38px;
background:rgba(15,15,40,0.6);
border-radius:10px;
overflow:hidden;
position:relative;
border:1px solid rgba(100,80,255,0.08);
}
.comp-bar-fill {
height:100%;
border-radius:10px;
transition:width 0.7s cubic-bezier(0.22,1,0.36,1);
display:flex;
align-items:center;
padding-left:14px;
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:0.78rem;
font-weight:800;
color:var(â€“bg-primary);
min-width:fit-content;
position:relative;
overflow:hidden;
}
.comp-bar-fill::after {
content:â€™â€™;
position:absolute;
top:0; right:0; bottom:0; width:40px;
background:linear-gradient(90deg, transparent, rgba(255,255,255,0.15));
}
.comp-row[data-eco=â€œdocomoâ€] .comp-bar-fill { background:linear-gradient(90deg, var(â€“docomo-primary), var(â€“docomo-light)); box-shadow:0 0 20px var(â€“docomo-glow); }
.comp-row[data-eco=â€œauâ€] .comp-bar-fill { background:linear-gradient(90deg, var(â€“au-primary), var(â€“au-light)); box-shadow:0 0 20px var(â€“au-glow); }
.comp-row[data-eco=â€œpaypayâ€] .comp-bar-fill { background:linear-gradient(90deg, var(â€“paypay-primary), var(â€“paypay-light)); box-shadow:0 0 20px var(â€“paypay-glow); }
.comp-row[data-eco=â€œrakutenâ€] .comp-bar-fill { background:linear-gradient(90deg, var(â€“rakuten-primary), var(â€“rakuten-light)); box-shadow:0 0 20px var(â€“rakuten-glow); }
.comp-row[data-eco=â€œvpointâ€] .comp-bar-fill { background:linear-gradient(90deg, var(â€“vpoint-primary), var(â€“vpoint-light)); box-shadow:0 0 20px var(â€“vpoint-glow); }

.comp-row.is-best .comp-label::after {
content:â€˜ğŸ‘‘â€™;
margin-left:6px;
}

.comp-annual {
width:120px;
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:0.8rem;
font-weight:700;
flex-shrink:0;
text-align:right;
color:var(â€“text-secondary);
}

/* ============ RECOMMENDATION ============ */
.recommendation {
margin-top:32px;
background:var(â€“bg-card);
border:1px solid var(â€“border-color);
border-radius:20px;
padding:32px;
backdrop-filter:blur(20px);
position:relative;
overflow:hidden;
}
.recommendation::before {
content:â€™â€™;
position:absolute;
top:0; left:0; right:0; bottom:0;
background: radial-gradient(ellipse at 20% 50%, rgba(255,200,0,0.03), transparent 60%);
pointer-events:none;
}
.recommendation h2 {
font-family:â€˜Orbitronâ€™,â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.72rem;
color:var(â€“text-muted);
font-weight:700;
letter-spacing:0.12em;
text-transform:uppercase;
margin-bottom:20px;
display:flex;
align-items:center;
gap:10px;
}
.rec-content { display:flex; align-items:center; gap:24px; flex-wrap:wrap; }
.rec-badge {
font-family:â€˜Orbitronâ€™,sans-serif;
font-size:1.3rem;
font-weight:900;
padding:18px 32px;
border-radius:16px;
letter-spacing:0.03em;
position:relative;
overflow:hidden;
}
.rec-badge::after {
content:â€™â€™;
position:absolute;
top:0; left:-100%; width:60%; height:100%;
background:linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
animation: shimmer 3s ease-in-out infinite;
}
@keyframes shimmer {
0% { left:-100%; }
100% { left:200%; }
}
.rec-badge[data-eco=â€œdocomoâ€] { background:var(â€“docomo-bg); color:var(â€“docomo-light); border:1px solid rgba(255,23,68,0.3); box-shadow:0 4px 30px var(â€“docomo-glow); }
.rec-badge[data-eco=â€œauâ€] { background:var(â€“au-bg); color:var(â€“au-light); border:1px solid rgba(255,109,0,0.3); box-shadow:0 4px 30px var(â€“au-glow); }
.rec-badge[data-eco=â€œpaypayâ€] { background:var(â€“paypay-bg); color:var(â€“paypay-light); border:1px solid rgba(255,0,68,0.3); box-shadow:0 4px 30px var(â€“paypay-glow); }
.rec-badge[data-eco=â€œrakutenâ€] { background:var(â€“rakuten-bg); color:var(â€“rakuten-light); border:1px solid rgba(224,0,0,0.3); box-shadow:0 4px 30px var(â€“rakuten-glow); }
.rec-badge[data-eco=â€œvpointâ€] { background:var(â€“vpoint-bg); color:var(â€“vpoint-light); border:1px solid rgba(0,230,118,0.3); box-shadow:0 4px 30px var(â€“vpoint-glow); }
.rec-reason {
font-size:0.88rem;
color:var(â€“text-secondary);
line-height:1.8;
flex:1;
min-width:200px;
}
.rec-reason strong { color:var(â€“text-primary); }

/* ============ RESET BUTTON ============ */
.reset-btn {
display:inline-flex;
align-items:center;
gap:8px;
padding:12px 24px;
border-radius:12px;
border:1px solid rgba(100,80,255,0.2);
background:rgba(140,80,255,0.08);
color:var(â€“text-secondary);
font-family:â€˜Noto Sans JPâ€™,sans-serif;
font-size:0.82rem;
font-weight:600;
cursor:pointer;
transition:all 0.3s;
margin-top:24px;
}
.reset-btn:hover {
background:rgba(140,80,255,0.15);
border-color:rgba(140,80,255,0.4);
color:var(â€“text-primary);
box-shadow:0 0 20px rgba(140,80,255,0.15);
transform:translateY(-1px);
}

/* ============ NO SELECTION ============ */
.no-selection {
text-align:center;
padding:24px;
color:var(â€“text-muted);
font-size:0.85rem;
border:1px dashed rgba(100,80,255,0.15);
border-radius:12px;
}

/* ============ SCROLLBAR ============ */
::-webkit-scrollbar { width:6px; height:6px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:rgba(140,80,255,0.2); border-radius:3px; }
::-webkit-scrollbar-thumb:hover { background:rgba(140,80,255,0.4); }

/* ============ MOBILE ============ */
@media(max-width:600px) {
.app-container { padding:10px 10px 50px; }
.monthly-section { padding:20px 16px; }
.input-group input { width:140px; }
.service-card, .result-card { padding:20px; }
.rate-value { font-size:2.8rem; }
.comp-label { width:64px; font-size:0.72rem; }
.comp-annual { width:80px; font-size:0.68rem; }
.tab-btn { padding:10px 16px; font-size:0.8rem; }
.app-header h1 { font-size:2rem; }
}
</style>

</head>
<body>

<div class="bg-effects"></div>
<div class="bg-grid"></div>

<div class="app-container">

  <header class="app-header">
    <div class="title-badge">âš¡ Point Ecosystem Simulator</div>
    <h1>
      <span class="title-glow">æœ€å¼·çµŒæ¸ˆåœ</span>
      <span class="title-main">æœ€å¼·çµŒæ¸ˆåœ</span>
    </h1>
    <p class="subtitle">ä¿æœ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã ã‘ã§ã€<span class="highlight">é‚„å…ƒç‡ã¨ãƒ¡ãƒªãƒƒãƒˆ</span>ãŒç¬æ™‚ã«å¯è¦–åŒ–ã€‚<br>ã‚ãªãŸã«ã¨ã£ã¦ã®æœ€å¼·çµŒæ¸ˆåœã‚’è¦‹ã¤ã‘ã‚ˆã†ã€‚</p>
  </header>

  <!-- Monthly spend -->

  <div class="monthly-section">
    <div class="section-label"><span class="icon">ğŸ“Š</span> æœˆé–“åˆ©ç”¨é¡ â€” å¹´é–“ãƒã‚¤ãƒ³ãƒˆè©¦ç®—</div>
    <div class="input-group">
      <label>ã‚¯ãƒ¬ã‚«æ±ºæ¸ˆé¡/æœˆ</label>
      <input type="number" id="monthlyCard" value="100000" min="0" step="10000">
      <span class="unit">å††</span>
    </div>
    <div class="input-group">
      <label>QRæ±ºæ¸ˆé¡/æœˆ</label>
      <input type="number" id="monthlyQR" value="30000" min="0" step="5000">
      <span class="unit">å††</span>
    </div>
    <div class="input-group">
      <label>ãƒãƒƒãƒˆã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°/æœˆ</label>
      <input type="number" id="monthlyNet" value="30000" min="0" step="5000">
      <span class="unit">å††</span>
    </div>
  </div>

  <!-- Tabs -->

  <nav class="tab-nav">
    <button class="tab-btn active" data-eco="docomo" onclick="switchTab('docomo')"><span class="eco-dot"></span>ãƒ‰ã‚³ãƒ¢</button>
    <button class="tab-btn" data-eco="au" onclick="switchTab('au')"><span class="eco-dot"></span>au</button>
    <button class="tab-btn" data-eco="paypay" onclick="switchTab('paypay')"><span class="eco-dot"></span>PayPay</button>
    <button class="tab-btn" data-eco="rakuten" onclick="switchTab('rakuten')"><span class="eco-dot"></span>æ¥½å¤©</button>
    <button class="tab-btn" data-eco="vpoint" onclick="switchTab('vpoint')"><span class="eco-dot"></span>Vãƒã‚¤ãƒ³ãƒˆ</button>
  </nav>

  <!-- ========== DOCOMO ========== -->

  <div class="eco-panel active" id="panel-docomo" data-eco="docomo">
    <div class="eco-layout">
      <div class="service-card">
        <h3>ğŸ”´ ãƒ‰ã‚³ãƒ¢çµŒæ¸ˆåœ â€” ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ</h3>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dcard_platinum" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dã‚«ãƒ¼ãƒ‰ PLATINUM</div><div class="svc-desc">å¹´ä¼šè²»29,700å††ãƒ»åŸºæœ¬1%ãƒ»ãƒ‰ã‚³ãƒ¢æ–™é‡‘æœ€å¤§20%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dcard" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dã‚«ãƒ¼ãƒ‰ GOLD</div><div class="svc-desc">å¹´ä¼šè²»11,000å††ãƒ»åŸºæœ¬1%ãƒ»ãƒ‰ã‚³ãƒ¢æ–™é‡‘10%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dcard_goldu" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dã‚«ãƒ¼ãƒ‰ GOLD Uï¼ˆ29æ­³ä»¥ä¸‹ï¼‰</div><div class="svc-desc">å¹´ä¼šè²»3,300å††ï¼ˆæ¡ä»¶ã§å®Ÿè³ªç„¡æ–™ï¼‰ãƒ»ãƒ‰ã‚³ãƒ¢æ–™é‡‘5%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dcardnormal" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dã‚«ãƒ¼ãƒ‰ï¼ˆé€šå¸¸ï¼‰</div><div class="svc-desc">å¹´ä¼šè²»ç„¡æ–™ãƒ»åŸºæœ¬é‚„å…ƒç‡1%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="docomo_max" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒ‰ã‚³ãƒ¢ MAX / ãƒ‰ã‚³ãƒ¢ ãƒã‚¤æ´» MAX</div><div class="svc-desc">ãƒ‡ãƒ¼ã‚¿ç„¡åˆ¶é™ãƒ»å„ç¨®å‰²å¼•ã§5,148å††ã€œ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="docomo_poikatsu20" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒ‰ã‚³ãƒ¢ ãƒã‚¤æ´» 20</div><div class="svc-desc">20GBãƒ»dæ‰•ã„ç­‰ã§ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡UP</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="ahamo" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ahamo</div><div class="svc-desc">æœˆé¡2,970å††ãƒ»30GBãƒ»æµ·å¤–ãƒ­ãƒ¼ãƒŸãƒ³ã‚°ç„¡æ–™</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="docomo_mini" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒ‰ã‚³ãƒ¢ mini</div><div class="svc-desc">å°å®¹é‡ãƒ—ãƒ©ãƒ³ï¼ˆ4GB/10GBï¼‰ãƒ»ãƒ‰ã‚³ãƒ¢å…‰ã‚»ãƒƒãƒˆå‰²å¯¾è±¡</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="docomo_hikari" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒ‰ã‚³ãƒ¢å…‰ / home 5G</div><div class="svc-desc">dã‚«ãƒ¼ãƒ‰GOLDä»¥ä¸Šã§æ–™é‡‘10ã€œ20%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dbarai" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dæ‰•ã„</div><div class="svc-desc">dã‚«ãƒ¼ãƒ‰é€£æºã§é‚„å…ƒç‡UPãƒ»ãƒã‚¤æ´»ãƒ—ãƒ©ãƒ³ã§æœ€å¤§5%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="dmarket" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">dã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°/dãƒãƒ¼ã‚±ãƒƒãƒˆ</div><div class="svc-desc">dãƒã‚¤ãƒ³ãƒˆé‚„å…ƒã®å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="docomo" data-svc="masimo" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒãƒãƒƒã‚¯ã‚¹è¨¼åˆ¸ï¼ˆdã‚«ãƒ¼ãƒ‰ç©ç«‹ï¼‰</div><div class="svc-desc">GOLDä»¥ä¸Šã§æœ€å¤§1.1%ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒ</div></div></label>
      </div>
      <div class="result-card" data-eco="docomo">
        <h3>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h3>
        <div class="rate-display"><div class="rate-label">ç·åˆé‚„å…ƒç‡ï¼ˆåŠ é‡å¹³å‡ï¼‰</div><div class="rate-value" id="rate-docomo">1.0<span class="pct">%</span></div><div class="rate-breakdown" id="breakdown-docomo">åŸºæœ¬é‚„å…ƒç‡ 1.0%</div></div>
        <div class="benefits-list" id="benefits-docomo"><div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div></div>
        <div class="annual-box"><div class="annual-label">å¹´é–“ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div><div class="annual-value" id="annual-docomo" style="color:var(--docomo-light)">0 pt</div><div class="annual-sub" id="annual-sub-docomo"></div></div>
      </div>
    </div>
  </div>

  <!-- ========== AU ========== -->

  <div class="eco-panel" id="panel-au" data-eco="au">
    <div class="eco-layout">
      <div class="service-card">
        <h3>ğŸŸ  auçµŒæ¸ˆåœ â€” ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ</h3>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="aupay_gold" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">au PAY ã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»11,000å††ãƒ»åŸºæœ¬é‚„å…ƒç‡1%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="aupay_card" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">au PAY ã‚«ãƒ¼ãƒ‰ï¼ˆé€šå¸¸ï¼‰</div><div class="svc-desc">å¹´ä¼šè²»ç„¡æ–™ãƒ»åŸºæœ¬é‚„å…ƒç‡1%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="manekatsu2" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">auãƒãƒªãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ ãƒãƒæ´»2</div><div class="svc-desc">ãƒ‡ãƒ¼ã‚¿ç„¡åˆ¶é™ãƒ»é‡‘èé€£æºã§æœ€å¤§4,500å††é‚„å…ƒ/æœˆ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="au_mobile" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">au/UQ mobileå›ç·šï¼ˆé€šå¸¸ãƒ—ãƒ©ãƒ³ï¼‰</div><div class="svc-desc">ã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§æœ€å¤§20%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="au_hikari" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">auã²ã‹ã‚Š</div><div class="svc-desc">ã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§æœ€å¤§10%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="jibun_bank" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">auã˜ã¶ã‚“éŠ€è¡Œ</div><div class="svc-desc">ãƒãƒæ´»2ã§æœ€å¤§æœˆ1,500å††ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="au_pay" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">au PAYï¼ˆQRæ±ºæ¸ˆï¼‰</div><div class="svc-desc">ãƒãƒæ´»2+ã‚´ãƒ¼ãƒ«ãƒ‰ã§æœ€å¤§5%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="au_kabu" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ä¸‰è±UFJ eã‚¹ãƒãƒ¼ãƒˆè¨¼åˆ¸</div><div class="svc-desc">ãƒãƒæ´»2+ã‚´ãƒ¼ãƒ«ãƒ‰+NISAã§ç©ç«‹æœ€å¤§3%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="au" data-svc="au_denki" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">auã§ã‚“ã</div><div class="svc-desc">æœ€å¤§5%Pontaãƒã‚¤ãƒ³ãƒˆé‚„å…ƒ</div></div></label>
      </div>
      <div class="result-card" data-eco="au">
        <h3>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h3>
        <div class="rate-display"><div class="rate-label">ç·åˆé‚„å…ƒç‡ï¼ˆåŠ é‡å¹³å‡ï¼‰</div><div class="rate-value" id="rate-au">1.0<span class="pct">%</span></div><div class="rate-breakdown" id="breakdown-au">åŸºæœ¬é‚„å…ƒç‡ 1.0%</div></div>
        <div class="benefits-list" id="benefits-au"><div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div></div>
        <div class="annual-box"><div class="annual-label">å¹´é–“ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div><div class="annual-value" id="annual-au" style="color:var(--au-light)">0 pt</div><div class="annual-sub" id="annual-sub-au"></div></div>
      </div>
    </div>
  </div>

  <!-- ========== PAYPAY ========== -->

  <div class="eco-panel" id="panel-paypay" data-eco="paypay">
    <div class="eco-layout">
      <div class="service-card">
        <h3>ğŸ”´ PayPayçµŒæ¸ˆåœ â€” ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ</h3>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="pp_card" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">PayPayã‚«ãƒ¼ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»ç„¡æ–™ãƒ»åŸºæœ¬é‚„å…ƒç‡1%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="pp_gold" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">PayPayã‚«ãƒ¼ãƒ‰ ã‚´ãƒ¼ãƒ«ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»11,000å††ãƒ»åŸºæœ¬é‚„å…ƒç‡1.5%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="ymobile" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ãƒ¯ã‚¤ãƒ¢ãƒã‚¤ãƒ«</div><div class="svc-desc">PayPayæ±ºæ¸ˆã§æœ€å¤§+2%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="softbank" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯å›ç·š</div><div class="svc-desc">PayPayæ±ºæ¸ˆã§æœ€å¤§+2%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="pp_app" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">PayPayï¼ˆQRæ±ºæ¸ˆï¼‰</div><div class="svc-desc">ã‚«ãƒ¼ãƒ‰é€£æºã§æœ€å¤§1.5%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="yahoo_shop" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°</div><div class="svc-desc">PayPayãƒã‚¤ãƒ³ãƒˆæœ€å¤§+5%é‚„å…ƒ</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="pp_bank" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">PayPayéŠ€è¡Œ</div><div class="svc-desc">PayPayé€£æºã§ãƒãƒ£ãƒ¼ã‚¸ä¾¿åˆ©</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="paypay" data-svc="pp_sec" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">PayPayè¨¼åˆ¸</div><div class="svc-desc">ã‚¯ãƒ¬ã‚«ç©ç«‹ã§æœ€å¤§0.7%é‚„å…ƒ</div></div></label>
      </div>
      <div class="result-card" data-eco="paypay">
        <h3>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h3>
        <div class="rate-display"><div class="rate-label">ç·åˆé‚„å…ƒç‡ï¼ˆåŠ é‡å¹³å‡ï¼‰</div><div class="rate-value" id="rate-paypay">0.5<span class="pct">%</span></div><div class="rate-breakdown" id="breakdown-paypay">åŸºæœ¬é‚„å…ƒç‡ 0.5%</div></div>
        <div class="benefits-list" id="benefits-paypay"><div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div></div>
        <div class="annual-box"><div class="annual-label">å¹´é–“ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div><div class="annual-value" id="annual-paypay" style="color:var(--paypay-light)">0 pt</div><div class="annual-sub" id="annual-sub-paypay"></div></div>
      </div>
    </div>
  </div>

  <!-- ========== RAKUTEN ========== -->

  <div class="eco-panel" id="panel-rakuten" data-eco="rakuten">
    <div class="eco-layout">
      <div class="service-card">
        <h3>ğŸ”´ æ¥½å¤©çµŒæ¸ˆåœ â€” ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ</h3>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_card" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ã‚«ãƒ¼ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»ç„¡æ–™ãƒ»åŸºæœ¬é‚„å…ƒç‡1%ãƒ»SPU+2å€</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_premium" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚«ãƒ¼ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»11,000å††ãƒ»æ¥½å¤©å¸‚å ´+2å€ãƒ»ç©ºæ¸¯ãƒ©ã‚¦ãƒ³ã‚¸</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_mobile" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ï¼ˆæœ€å¼·ãƒ—ãƒ©ãƒ³ï¼‰</div><div class="svc-desc">SPU+4å€ï¼ˆä¸Šé™2,000pt/æœˆï¼‰â€»è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_bank" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©éŠ€è¡Œ</div><div class="svc-desc">æ¥½å¤©ã‚«ãƒ¼ãƒ‰å¼•è½ã§ SPU+0.5å€</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_sec" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©è¨¼åˆ¸ï¼ˆãƒã‚¤ãƒ³ãƒˆæŠ•è³‡ï¼‰</div><div class="svc-desc">æŠ•è³‡ä¿¡è¨—ãƒã‚¤ãƒ³ãƒˆæŠ•è³‡ã§ SPU+æœ€å¤§1å€</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_pay" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ãƒšã‚¤</div><div class="svc-desc">æ¥½å¤©ã‚«ãƒ¼ãƒ‰ãƒãƒ£ãƒ¼ã‚¸æ‰•ã„ã§1.5%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_ichiba" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©å¸‚å ´ï¼ˆåˆ©ç”¨ï¼‰</div><div class="svc-desc">SPUé©ç”¨ã§é«˜é‚„å…ƒç‡ï¼ˆæœ€å¤§18å€ï¼‰</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_hikari" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ã²ã‹ã‚Š / Rakuten Turbo</div><div class="svc-desc">SPU+2å€ï¼ˆä¸Šé™1,000pt/æœˆï¼‰â€»è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="rakuten" data-svc="r_denki" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">æ¥½å¤©ã§ã‚“ã</div><div class="svc-desc">æœˆ5,500å††ä»¥ä¸Šåˆ©ç”¨ã§SPU+0.5å€</div></div></label>
      </div>
      <div class="result-card" data-eco="rakuten">
        <h3>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h3>
        <div class="rate-display"><div class="rate-label">æ¥½å¤©å¸‚å ´ã§ã®SPUå€ç‡</div><div class="rate-value" id="rate-rakuten">1.0<span class="pct">å€</span></div><div class="rate-breakdown" id="breakdown-rakuten">åŸºæœ¬é‚„å…ƒç‡ 1å€</div></div>
        <div class="benefits-list" id="benefits-rakuten"><div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div></div>
        <div class="annual-box"><div class="annual-label">å¹´é–“ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div><div class="annual-value" id="annual-rakuten" style="color:var(--rakuten-light)">0 pt</div><div class="annual-sub" id="annual-sub-rakuten"></div></div>
      </div>
    </div>
  </div>

  <!-- ========== VPOINT ========== -->

  <div class="eco-panel" id="panel-vpoint" data-eco="vpoint">
    <div class="eco-layout">
      <div class="service-card">
        <h3>ğŸŸ¢ Vãƒã‚¤ãƒ³ãƒˆçµŒæ¸ˆåœ â€” ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ</h3>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="olive" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">Oliveãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ãƒšã‚¤ï¼ˆä¸€èˆ¬ï¼‰</div><div class="svc-desc">å¹´ä¼šè²»ç„¡æ–™ãƒ»åŸºæœ¬é‚„å…ƒç‡0.5%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="olive_gold" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">Olive ã‚´ãƒ¼ãƒ«ãƒ‰ / ä¸‰äº•ä½å‹NL ã‚´ãƒ¼ãƒ«ãƒ‰</div><div class="svc-desc">å¹´100ä¸‡åˆ©ç”¨ã§å¹´ä¼šè²»å®Ÿè³ªç„¡æ–™ãƒ»åŸºæœ¬0.5%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="olive_platpref" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">Olive ãƒ—ãƒ©ãƒãƒŠãƒ—ãƒªãƒ•ã‚¡ãƒ¼ãƒ‰</div><div class="svc-desc">å¹´ä¼šè²»33,000å††ãƒ»åŸºæœ¬1%ãƒ»ç‰¹ç´„åº—æœ€å¤§+14%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="smbc_bank" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">ä¸‰äº•ä½å‹éŠ€è¡Œï¼ˆOliveå£åº§ï¼‰</div><div class="svc-desc">Vãƒã‚¤ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ—ãƒ­ã‚°ãƒ©ãƒ  +æœ€å¤§1%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="sbi_sec" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">SBIè¨¼åˆ¸ï¼ˆã‚¯ãƒ¬ã‚«ç©ç«‹ï¼‰</div><div class="svc-desc">æœ€å¤§3%é‚„å…ƒãƒ»Vãƒã‚¤ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ—ãƒ­ã‚°ãƒ©ãƒ +æœ€å¤§2%</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="vp_conveni" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">å¯¾è±¡ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»é£²é£Ÿåº—åˆ©ç”¨</div><div class="svc-desc">ã‚¹ãƒãƒ›ã‚¿ãƒƒãƒæ±ºæ¸ˆã§æœ€å¤§8%ï¼ˆOliveï¼‰ãƒ»æœ€å¤§20%ã‚‚å¯</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="vp_family" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">å®¶æ—ãƒã‚¤ãƒ³ãƒˆç™»éŒ²</div><div class="svc-desc">å®¶æ—1äººã«ã¤ã+1%ï¼ˆæœ€å¤§+5%ï¼‰ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»é£²é£Ÿåº—</div></div></label>
        <label class="check-item"><input type="checkbox" data-eco="vpoint" data-svc="vp_tsumitate" onchange="recalc()"><span class="check-box"></span><div><div class="svc-name">Vãƒã‚¤ãƒ³ãƒˆæŠ•è³‡</div><div class="svc-desc">ãƒã‚¤ãƒ³ãƒˆã§æŠ•è³‡ä¿¡è¨—è³¼å…¥å¯èƒ½</div></div></label>
      </div>
      <div class="result-card" data-eco="vpoint">
        <h3>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h3>
        <div class="rate-display"><div class="rate-label">ç·åˆé‚„å…ƒç‡ï¼ˆåŠ é‡å¹³å‡ï¼‰</div><div class="rate-value" id="rate-vpoint">0.5<span class="pct">%</span></div><div class="rate-breakdown" id="breakdown-vpoint">åŸºæœ¬é‚„å…ƒç‡ 0.5%</div></div>
        <div class="benefits-list" id="benefits-vpoint"><div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div></div>
        <div class="annual-box"><div class="annual-label">å¹´é–“ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</div><div class="annual-value" id="annual-vpoint" style="color:var(--vpoint-light)">0 pt</div><div class="annual-sub" id="annual-sub-vpoint"></div></div>
      </div>
    </div>
  </div>

  <!-- Comparison -->

  <div class="comparison-section">
    <h2><span class="icon">âš¡</span> çµŒæ¸ˆåœãƒãƒˆãƒ« â€” æ¨ªæ–­æ¯”è¼ƒ</h2>
    <div class="comparison-bars" id="comparison-bars"></div>
  </div>

  <!-- Recommendation -->

  <div class="recommendation">
    <h2><span class="icon">ğŸ†</span> ã‚ãªãŸã®æœ€å¼·çµŒæ¸ˆåœã¯ï¼Ÿ</h2>
    <div class="rec-content" id="rec-content">
      <div class="no-selection">å„çµŒæ¸ˆåœã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ã€æœ€é©ãªçµŒæ¸ˆåœã‚’ææ¡ˆã—ã¾ã™</div>
    </div>
  </div>

<button class="reset-btn" onclick="resetAll()">ğŸ”„ ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆ</button>

</div>

<script>
// ============ PARTICLES ============
(function initParticles(){
  const colors = ['rgba(140,80,255,0.3)','rgba(0,220,255,0.3)','rgba(255,60,100,0.2)','rgba(255,200,0,0.2)','rgba(0,230,118,0.2)'];
  for(let i=0;i<18;i++){
    const p = document.createElement('div');
    p.className='particle';
    const size = Math.random()*4+2;
    p.style.cssText=`width:${size}px;height:${size}px;left:${Math.random()*100}%;background:${colors[i%colors.length]};box-shadow:0 0 ${size*3}px ${colors[i%colors.length]};animation-duration:${Math.random()*12+8}s;animation-delay:${Math.random()*10}s;`;
    document.body.appendChild(p);
  }
})();

// ============ ECOSYSTEM DATA ============
const ecosystems = {
  docomo: {
    name: 'ãƒ‰ã‚³ãƒ¢',
    calc(checked, monthly) {
      let rate = 0, benefits = [], breakdown = [];
      let hasPlatinum = checked.has('dcard_platinum'), hasGold = checked.has('dcard'), hasGoldU = checked.has('dcard_goldu'), hasNormal = checked.has('dcardnormal');
      let hasCard = hasPlatinum || hasGold || hasGoldU || hasNormal;
      let hasPoikatsu = checked.has('docomo_max') || checked.has('docomo_poikatsu20');
      if (hasPlatinum) { rate=1.0; breakdown.push('dã‚«ãƒ¼ãƒ‰PLATINUM 1.0%'); benefits.push({icon:'ğŸ’³',text:'<strong>dã‚«ãƒ¼ãƒ‰ PLATINUM</strong>ï¼šåŸºæœ¬1%ã€ãƒ‰ã‚³ãƒ¢æ–™é‡‘ åˆå¹´åº¦20%é‚„å…ƒï¼ˆ2å¹´ç›®ä»¥é™10ã€œ20%ï¼‰ã€å¹´é–“åˆ©ç”¨ç‰¹å…¸ã‚ã‚Š'}); }
      else if (hasGold) { rate=1.0; breakdown.push('dã‚«ãƒ¼ãƒ‰GOLD 1.0%'); benefits.push({icon:'ğŸ’³',text:'<strong>dã‚«ãƒ¼ãƒ‰ GOLD</strong>ï¼šåŸºæœ¬1%ã€ãƒ‰ã‚³ãƒ¢æ–™é‡‘10%é‚„å…ƒã€å¹´é–“åˆ©ç”¨ç‰¹å…¸ã‚ã‚Š'}); }
      else if (hasGoldU) { rate=1.0; breakdown.push('dã‚«ãƒ¼ãƒ‰GOLD U 1.0%'); benefits.push({icon:'ğŸ’³',text:'<strong>dã‚«ãƒ¼ãƒ‰ GOLD U</strong>ï¼šåŸºæœ¬1%ã€ãƒ‰ã‚³ãƒ¢æ–™é‡‘5%é‚„å…ƒã€æ¡ä»¶é”æˆã§å¹´ä¼šè²»å®Ÿè³ªç„¡æ–™'}); }
      else if (hasNormal) { rate=1.0; breakdown.push('dã‚«ãƒ¼ãƒ‰ 1.0%'); benefits.push({icon:'ğŸ’³',text:'<strong>dã‚«ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1%ã€å¹´ä¼šè²»ç„¡æ–™'}); }
      let mobileRate = hasPlatinum ? 20 : hasGold ? 10 : hasGoldU ? 5 : 0;
      if (checked.has('docomo_max')) {
        benefits.push({icon:'ğŸ“±',text:`<strong>ãƒ‰ã‚³ãƒ¢ MAX / ãƒã‚¤æ´» MAX</strong>ï¼šãƒ‡ãƒ¼ã‚¿ç„¡åˆ¶é™${mobileRate>0?'ãƒ»dã‚«ãƒ¼ãƒ‰ã§æ–™é‡‘'+mobileRate+'%é‚„å…ƒ':''}`});
        if(hasPoikatsu && hasCard) benefits.push({icon:'âœ¨',text:'<strong>ãƒã‚¤æ´»ãƒ—ãƒ©ãƒ³ç‰¹å…¸</strong>ï¼šdæ‰•ã„ç­‰ã®æ±ºæ¸ˆãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡UPï¼ˆdã‚«ãƒ¼ãƒ‰ç¨®åˆ¥ã§æœ€å¤§+5%ï¼‰'});
      }
      if (checked.has('docomo_poikatsu20')) {
        benefits.push({icon:'ğŸ“±',text:`<strong>ãƒ‰ã‚³ãƒ¢ ãƒã‚¤æ´» 20</strong>ï¼š20GB${mobileRate>0?'ãƒ»dã‚«ãƒ¼ãƒ‰ã§æ–™é‡‘'+mobileRate+'%é‚„å…ƒ':''}`});
        if(hasCard) benefits.push({icon:'âœ¨',text:'<strong>ãƒã‚¤æ´»20ç‰¹å…¸</strong>ï¼šdæ‰•ã„ç­‰ã®æ±ºæ¸ˆãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡UP'});
      }
      if (checked.has('ahamo')) { benefits.push({icon:'ğŸ“±',text:'<strong>ahamo</strong>ï¼šæœˆé¡2,970å††/30GBã€æµ·å¤–ãƒ­ãƒ¼ãƒŸãƒ³ã‚°ç„¡æ–™' + (hasGoldU ? 'ãƒ»GOLD Uã§+5GBãƒœãƒ¼ãƒŠã‚¹' : '')}); }
      if (checked.has('docomo_mini')) { benefits.push({icon:'ğŸ“±',text:`<strong>ãƒ‰ã‚³ãƒ¢ mini</strong>ï¼šå°å®¹é‡ä½ä¾¡æ ¼ãƒ—ãƒ©ãƒ³ï¼ˆ4GB/10GBï¼‰${mobileRate>0?'ãƒ»dã‚«ãƒ¼ãƒ‰ã§æ–™é‡‘'+mobileRate+'%é‚„å…ƒ':''}`}); }
      if (checked.has('docomo_hikari')) {
        if(mobileRate>0) benefits.push({icon:'ğŸŒ',text:`<strong>ãƒ‰ã‚³ãƒ¢å…‰ / home 5G</strong>ï¼šæ–™é‡‘${mobileRate}%é‚„å…ƒï¼ˆæœˆç´„500ã€œ1,000ptï¼‰`});
        else benefits.push({icon:'ğŸŒ',text:'ãƒ‰ã‚³ãƒ¢å…‰ / home 5Gåˆ©ç”¨ä¸­ï¼ˆdã‚«ãƒ¼ãƒ‰GOLDä»¥ä¸Šã§æ–™é‡‘é‚„å…ƒå¯¾è±¡ï¼‰'});
      }
      if (checked.has('dbarai')) {
        let dRate = hasPoikatsu && hasPlatinum ? 5.0 : hasPoikatsu && (hasGold||hasGoldU) ? 3.0 : hasCard ? 1.5 : 0.5;
        if(hasCard){rate+=0.5;breakdown.push('dæ‰•ã„+dã‚«ãƒ¼ãƒ‰ +0.5%');}
        benefits.push({icon:'ğŸ“²',text:`<strong>dæ‰•ã„</strong>ï¼šé‚„å…ƒç‡${dRate}%${hasPoikatsu?' (ãƒã‚¤æ´»ãƒ—ãƒ©ãƒ³é©ç”¨)':' (dã‚«ãƒ¼ãƒ‰é€£æº)'}`});
      }
      if (checked.has('dmarket')) { benefits.push({icon:'ğŸ›’',text:'<strong>dã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°</strong>ï¼šdãƒã‚¤ãƒ³ãƒˆæœ€å¤§20å€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã‚ã‚Š'}); if(hasCard)rate+=0.5; }
      if (checked.has('masimo')) { let mr=hasPlatinum?1.1:hasGold?1.1:hasGoldU?1.1:0.5; benefits.push({icon:'ğŸ“ˆ',text:`<strong>ãƒãƒãƒƒã‚¯ã‚¹è¨¼åˆ¸</strong>ï¼šdã‚«ãƒ¼ãƒ‰ç©ç«‹ã§æœ€å¤§${mr}%ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒ`}); }
      if(!hasCard) rate = checked.size>0?0.5:0;
      let annualPts = Math.round(monthly.card*(rate/100)*12);
      if(checked.has('dbarai')) { let dR=hasPoikatsu&&hasPlatinum?0.05:hasPoikatsu&&hasCard?0.03:hasCard?0.015:0.005; annualPts+=Math.round(monthly.qr*dR*12); }
      let hasMobile=checked.has('docomo_max')||checked.has('docomo_poikatsu20')||checked.has('ahamo')||checked.has('docomo_mini');
      if(mobileRate>0&&hasMobile) annualPts+=Math.round(8000*mobileRate/100)*12;
      if(mobileRate>0&&checked.has('docomo_hikari')) annualPts+=Math.round(5000*mobileRate/100)*12;
      if(checked.has('dmarket')) annualPts+=Math.round(monthly.net*(rate+2)/100*12);
      return {rate:Math.min(rate,10),benefits,breakdown,annualPts};
    }
  },
  au: {
    name: 'au',
    calc(checked, monthly) {
      let rate=0, benefits=[], breakdown=[];
      let hasGold=checked.has('aupay_gold'), hasNormal=checked.has('aupay_card'), hasCard=hasGold||hasNormal;
      let hasManekatsu=checked.has('manekatsu2');
      if(hasGold){rate=1.0;breakdown.push('au PAY ã‚´ãƒ¼ãƒ«ãƒ‰ 1.0%');benefits.push({icon:'ğŸ’³',text:'<strong>au PAY ã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1%ã€auæ–™é‡‘æœ€å¤§20%é‚„å…ƒ'});}
      else if(hasNormal){rate=1.0;breakdown.push('au PAY ã‚«ãƒ¼ãƒ‰ 1.0%');benefits.push({icon:'ğŸ’³',text:'<strong>au PAY ã‚«ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1%ã€å¹´ä¼šè²»ç„¡æ–™'});}
      if(hasManekatsu){
        benefits.push({icon:'ğŸ“±',text:'<strong>auãƒãƒªãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ ãƒãƒæ´»2</strong>ï¼šãƒ‡ãƒ¼ã‚¿ç„¡åˆ¶é™ãƒ»Pontaãƒ‘ã‚¹ç­‰5ã‚µãƒ¼ãƒ“ã‚¹ä»˜å¸¯'});
        if(hasGold){
          benefits.push({icon:'ğŸ’°',text:'<strong>ãƒãƒæ´»2Ã—ã‚´ãƒ¼ãƒ«ãƒ‰ç‰¹å…¸</strong>ï¼šau PAYã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ+1.5%é‚„å…ƒï¼ˆä¸Šé™2,500pt/æœˆï¼‰'});
          rate+=1.5; breakdown.push('ãƒãƒæ´»2ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ +1.5%');
        } else if(hasNormal){
          benefits.push({icon:'ğŸ’°',text:'<strong>ãƒãƒæ´»2Ã—ã‚«ãƒ¼ãƒ‰ç‰¹å…¸</strong>ï¼šau PAYã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ+0.5%é‚„å…ƒï¼ˆä¸Šé™500pt/æœˆï¼‰'});
          rate+=0.5; breakdown.push('ãƒãƒæ´»2ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ +0.5%');
        }
      }
      if(checked.has('au_mobile')){if(hasGold)benefits.push({icon:'ğŸ“±',text:'<strong>aué€šå¸¸ãƒ—ãƒ©ãƒ³æ–™é‡‘æœ€å¤§20%é‚„å…ƒ</strong>ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ç‰¹å…¸ãƒ»12ãƒ¶æœˆé™å®šï¼‰'});else benefits.push({icon:'ğŸ“±',text:'au/UQ mobileåˆ©ç”¨ä¸­ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§æœ€å¤§20%é‚„å…ƒï¼‰'});}
      if(checked.has('au_hikari')&&hasGold){benefits.push({icon:'ğŸŒ',text:'<strong>auã²ã‹ã‚Šæ–™é‡‘æœ€å¤§10%é‚„å…ƒ</strong>ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ç‰¹å…¸ï¼‰'});}
      if(checked.has('jibun_bank')){
        if(hasManekatsu&&hasGold){benefits.push({icon:'ğŸ¦',text:'<strong>auã˜ã¶ã‚“éŠ€è¡Œ</strong>ï¼šãƒãƒæ´»2ç‰¹å…¸ã§æ¯æœˆæœ€å¤§2,000å††ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯ï¼ˆæ®‹é«˜+ã‚«ãƒ¼ãƒ‰å¼•è½é€£æºï¼‰'});rate+=0.5;breakdown.push('ã˜ã¶ã‚“éŠ€è¡Œé€£æº +0.5%');}
        else if(hasManekatsu){benefits.push({icon:'ğŸ¦',text:'<strong>auã˜ã¶ã‚“éŠ€è¡Œ</strong>ï¼šãƒãƒæ´»2ç‰¹å…¸ã§æ¯æœˆæœ€å¤§1,100å††ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯'});if(hasCard){rate+=0.5;breakdown.push('ã˜ã¶ã‚“éŠ€è¡Œé€£æº +0.5%');}}
        else {benefits.push({icon:'ğŸ¦',text:'<strong>auã˜ã¶ã‚“éŠ€è¡Œ</strong>ï¼šau PAYé€£æºç­‰ã§æ™®é€šé é‡‘é‡‘åˆ©å„ªé‡'});if(hasCard){rate+=0.5;breakdown.push('ã˜ã¶ã‚“éŠ€è¡Œé€£æº +0.5%');}}
      }
      if(checked.has('au_pay')){
        let payRate = hasManekatsu&&hasGold ? 5.0 : hasManekatsu&&hasNormal ? 2.0 : hasCard ? 1.5 : 0.5;
        benefits.push({icon:'ğŸ“²',text:`<strong>au PAYï¼ˆQRæ±ºæ¸ˆï¼‰</strong>ï¼šé‚„å…ƒç‡æœ€å¤§${payRate}%${hasManekatsu?' (ãƒãƒæ´»2ç‰¹å…¸è¾¼)':''}`});
        if(!hasManekatsu&&hasCard){rate+=0.5;breakdown.push('au PAY ãƒãƒ£ãƒ¼ã‚¸ +0.5%');}
      }
      if(checked.has('au_kabu')){
        let secRate = hasManekatsu&&hasGold ? 3.0 : hasGold ? 1.0 : 0.5;
        benefits.push({icon:'ğŸ“ˆ',text:`<strong>ä¸‰è±UFJ eã‚¹ãƒãƒ¼ãƒˆè¨¼åˆ¸</strong>ï¼šã‚¯ãƒ¬ã‚«ç©ç«‹ã§æœ€å¤§${secRate}%é‚„å…ƒ${hasManekatsu?'ï¼ˆãƒãƒæ´»2+NISAç‰¹å…¸è¾¼ï¼‰':''}`});
      }
      if(checked.has('au_denki'))benefits.push({icon:'âš¡',text:'<strong>auã§ã‚“ã</strong>ï¼šé›»æ°—æ–™é‡‘ã®æœ€å¤§5%ã‚’Pontaãƒã‚¤ãƒ³ãƒˆé‚„å…ƒ'});
      if(!hasCard)rate=checked.size>0?0.5:0;
      let annualPts=Math.round(monthly.card*(rate/100)*12);
      let payR = hasManekatsu&&hasGold?0.05:hasManekatsu&&hasNormal?0.02:hasCard?0.015:0.005;
      if(checked.has('au_pay'))annualPts+=Math.round(monthly.qr*payR*12);
      let hasMobile=hasManekatsu||checked.has('au_mobile');
      if(hasGold&&hasMobile)annualPts+=1500*12;
      if(hasGold&&checked.has('au_hikari'))annualPts+=500*12;
      if(hasManekatsu&&checked.has('jibun_bank')){annualPts+=hasGold?2000*12:1100*12;}
      return {rate:Math.min(rate,10),benefits,breakdown,annualPts};
    }
  },
  paypay: {
    name: 'PayPay',
    calc(checked, monthly) {
      let rate=0, benefits=[], breakdown=[];
      let hasGold=checked.has('pp_gold'), hasNormal=checked.has('pp_card'), hasCard=hasGold||hasNormal;
      if(hasGold){rate=1.5;breakdown.push('PayPayã‚«ãƒ¼ãƒ‰ ã‚´ãƒ¼ãƒ«ãƒ‰ 1.5%');benefits.push({icon:'ğŸ’³',text:'<strong>PayPayã‚«ãƒ¼ãƒ‰ ã‚´ãƒ¼ãƒ«ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1.5%ã€ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯æ–™é‡‘æœ€å¤§10%é‚„å…ƒ'});}
      else if(hasNormal){rate=1.0;breakdown.push('PayPayã‚«ãƒ¼ãƒ‰ 1.0%');benefits.push({icon:'ğŸ’³',text:'<strong>PayPayã‚«ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1%ã€å¹´ä¼šè²»ç„¡æ–™'});}
      if(checked.has('ymobile')){rate+=2.0;breakdown.push('ãƒ¯ã‚¤ãƒ¢ãƒã‚¤ãƒ« +2.0%');benefits.push({icon:'ğŸ“±',text:'<strong>ãƒ¯ã‚¤ãƒ¢ãƒã‚¤ãƒ«</strong>ï¼šPayPayæ±ºæ¸ˆæ™‚+æœ€å¤§2%é‚„å…ƒ'});}
      if(checked.has('softbank')){rate+=2.0;breakdown.push('ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ +2.0%');benefits.push({icon:'ğŸ“±',text:'<strong>ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯å›ç·š</strong>ï¼šPayPayæ±ºæ¸ˆæ™‚+æœ€å¤§2%é‚„å…ƒ'});if(hasGold)benefits.push({icon:'âœ¨',text:'<strong>SBæ–™é‡‘10%é‚„å…ƒ</strong>ï¼ˆPayPayã‚«ãƒ¼ãƒ‰ã‚´ãƒ¼ãƒ«ãƒ‰ç‰¹å…¸ï¼‰'});}
      if(checked.has('pp_app')){if(hasCard)benefits.push({icon:'ğŸ“²',text:'<strong>PayPayÃ—ã‚«ãƒ¼ãƒ‰é€£æº</strong>ï¼šPayPayãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦é‚„å…ƒ'});else benefits.push({icon:'ğŸ“²',text:'PayPayï¼šåŸºæœ¬é‚„å…ƒç‡0.5%ï¼ˆã‚«ãƒ¼ãƒ‰é€£æºã§å¤§å¹…UPï¼‰'});}
      if(checked.has('yahoo_shop')){let s=hasCard?5.0:1.0;benefits.push({icon:'ğŸ›’',text:`<strong>Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°</strong>ï¼šæœ€å¤§${s}%é‚„å…ƒ`});}
      if(checked.has('pp_bank'))benefits.push({icon:'ğŸ¦',text:'<strong>PayPayéŠ€è¡Œ</strong>ï¼šPayPayæ®‹é«˜ãƒãƒ£ãƒ¼ã‚¸æ‰‹æ•°æ–™ç„¡æ–™'});
      if(checked.has('pp_sec'))benefits.push({icon:'ğŸ“ˆ',text:'<strong>PayPayè¨¼åˆ¸</strong>ï¼šã‚¯ãƒ¬ã‚«ç©ç«‹ã§æœ€å¤§0.7%é‚„å…ƒ'});
      if(!hasCard)rate=checked.size>0?0.5:0;
      let annualPts=Math.round(monthly.card*(rate/100)*12);
      if(checked.has('pp_app'))annualPts+=Math.round(monthly.qr*(hasCard?0.015:0.005)*12);
      if(checked.has('yahoo_shop'))annualPts+=Math.round(monthly.net*(hasCard?0.05:0.01)*12);
      if(hasGold&&checked.has('softbank'))annualPts+=1000*12;
      return {rate:Math.min(rate,12),benefits,breakdown,annualPts};
    }
  },
  rakuten: {
    name: 'æ¥½å¤©',
    calc(checked, monthly) {
      let spuRate=1.0, cardRate=0, benefits=[], breakdown=['æ¥½å¤©å¸‚å ´ åŸºæœ¬1å€'];
      let hasCard=checked.has('r_card'), hasPremium=checked.has('r_premium');
      if(hasPremium){spuRate+=2.0;cardRate=1.0;breakdown.push('ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚«ãƒ¼ãƒ‰ +2å€');benefits.push({icon:'ğŸ’³',text:'<strong>æ¥½å¤©ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚«ãƒ¼ãƒ‰</strong>ï¼šæ¥½å¤©å¸‚å ´SPU+2å€ã€ç©ºæ¸¯ãƒ©ã‚¦ãƒ³ã‚¸ç‰¹å…¸'});}
      else if(hasCard){spuRate+=2.0;cardRate=1.0;breakdown.push('æ¥½å¤©ã‚«ãƒ¼ãƒ‰ +2å€');benefits.push({icon:'ğŸ’³',text:'<strong>æ¥½å¤©ã‚«ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬é‚„å…ƒç‡1%ã€æ¥½å¤©å¸‚å ´SPU+2å€ï¼ˆé€šå¸¸+ç‰¹å…¸ï¼‰'});}
      if(checked.has('r_mobile')){spuRate+=4.0;breakdown.push('æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ« +4å€');benefits.push({icon:'ğŸ“±',text:'<strong>æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ï¼ˆæœ€å¼·ãƒ—ãƒ©ãƒ³ï¼‰</strong>ï¼šSPU+4å€ï¼ˆä¸Šé™2,000pt/æœˆï¼‰â€»è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼'});}
      if(checked.has('r_bank')){spuRate+=0.5;breakdown.push('æ¥½å¤©éŠ€è¡Œ +0.5å€');benefits.push({icon:'ğŸ¦',text:'<strong>æ¥½å¤©éŠ€è¡Œ</strong>ï¼šæ¥½å¤©ã‚«ãƒ¼ãƒ‰å¼•è½ã§SPU+0.5å€ã€é‡‘åˆ©UP'});}
      if(checked.has('r_sec')){spuRate+=1.0;breakdown.push('æ¥½å¤©è¨¼åˆ¸ +æœ€å¤§1å€');benefits.push({icon:'ğŸ“ˆ',text:'<strong>æ¥½å¤©è¨¼åˆ¸</strong>ï¼šãƒã‚¤ãƒ³ãƒˆæŠ•è³‡ã§SPU+æœ€å¤§1å€ã€ã‚¯ãƒ¬ã‚«ç©ç«‹0.5ã€œ1%é‚„å…ƒ'});}
      if(checked.has('r_pay'))benefits.push({icon:'ğŸ“²',text:'<strong>æ¥½å¤©ãƒšã‚¤</strong>ï¼šæ¥½å¤©ã‚«ãƒ¼ãƒ‰ãƒãƒ£ãƒ¼ã‚¸æ‰•ã„ã§å®Ÿè³ª1.5%'});
      if(checked.has('r_ichiba'))benefits.push({icon:'ğŸ›’',text:`<strong>æ¥½å¤©å¸‚å ´</strong>ï¼šç¾åœ¨ã®SPUåˆè¨ˆ <strong>${spuRate.toFixed(1)}å€</strong> ã§è²·ã„ç‰©å¯èƒ½ï¼ˆæœ€å¤§18å€ï¼‰`});
      if(checked.has('r_hikari')){spuRate+=2.0;breakdown.push('æ¥½å¤©ã²ã‹ã‚Š +2å€');benefits.push({icon:'ğŸŒ',text:'<strong>æ¥½å¤©ã²ã‹ã‚Š / Rakuten Turbo</strong>ï¼šSPU+2å€ï¼ˆä¸Šé™1,000pt/æœˆï¼‰â€»è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼'});}
      if(checked.has('r_denki')){spuRate+=0.5;breakdown.push('æ¥½å¤©ã§ã‚“ã +0.5å€');benefits.push({icon:'âš¡',text:'<strong>æ¥½å¤©ã§ã‚“ã</strong>ï¼šæœˆ5,500å††ä»¥ä¸Šåˆ©ç”¨ã§SPU+0.5å€'});}
      let annualPts=0;
      let eff=hasPremium||hasCard?1.0:0;
      annualPts+=Math.round(monthly.card*(eff/100)*12);
      if(checked.has('r_pay'))annualPts+=Math.round(monthly.qr*0.015*12);
      if(checked.has('r_ichiba'))annualPts+=Math.round(monthly.net*(spuRate/100)*12);
      return {rate:spuRate,benefits,breakdown,annualPts,isSpuRate:true};
    }
  },
  vpoint: {
    name: 'Vãƒã‚¤ãƒ³ãƒˆ',
    calc(checked, monthly) {
      let rate=0, benefits=[], breakdown=[];
      let hasPlatPref=checked.has('olive_platpref'), hasGold=checked.has('olive_gold'), hasOlive=checked.has('olive');
      let hasCard=hasPlatPref||hasGold||hasOlive;
      if(hasPlatPref){rate=1.0;breakdown.push('ãƒ—ãƒ©ãƒãƒŠãƒ—ãƒªãƒ•ã‚¡ãƒ¼ãƒ‰ 1.0%');benefits.push({icon:'ğŸ’³',text:'<strong>Olive ãƒ—ãƒ©ãƒãƒŠãƒ—ãƒªãƒ•ã‚¡ãƒ¼ãƒ‰</strong>ï¼šåŸºæœ¬1%ã€ç‰¹ç´„åº—ã§æœ€å¤§+14%ã€å¹´é–“åˆ©ç”¨ç‰¹å…¸ã‚ã‚Š'});}
      else if(hasGold){rate=0.5;breakdown.push('Olive ã‚´ãƒ¼ãƒ«ãƒ‰ 0.5%');benefits.push({icon:'ğŸ’³',text:'<strong>Olive ã‚´ãƒ¼ãƒ«ãƒ‰</strong>ï¼šåŸºæœ¬0.5%ã€å¹´100ä¸‡åˆ©ç”¨ã§10,000pt+å¹´ä¼šè²»å®Ÿè³ªç„¡æ–™'});}
      else if(hasOlive){rate=0.5;breakdown.push('Olive ä¸€èˆ¬ 0.5%');benefits.push({icon:'ğŸ’³',text:'<strong>Oliveãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ãƒšã‚¤ï¼ˆä¸€èˆ¬ï¼‰</strong>ï¼šåŸºæœ¬0.5%ã€å¹´ä¼šè²»æ°¸å¹´ç„¡æ–™'});}
      if(checked.has('smbc_bank')){if(hasCard){rate+=1.0;breakdown.push('Oliveå£åº§é€£æº +1.0%');}benefits.push({icon:'ğŸ¦',text:'<strong>ä¸‰äº•ä½å‹éŠ€è¡Œï¼ˆOliveå£åº§ï¼‰</strong>ï¼šVãƒã‚¤ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å¯¾è±¡åº—èˆ—+æœ€å¤§1%'});}
      if(checked.has('sbi_sec')){let sr=hasPlatPref?3.0:hasGold?1.0:0.5;benefits.push({icon:'ğŸ“ˆ',text:`<strong>SBIè¨¼åˆ¸</strong>ï¼šã‚¯ãƒ¬ã‚«ç©ç«‹ã§æœ€å¤§${sr}%é‚„å…ƒãƒ»Vãƒã‚¤ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ—ãƒ­ã‚°ãƒ©ãƒ +æœ€å¤§2%`});if(hasCard){rate+=0.5;breakdown.push('SBIè¨¼åˆ¸é€£æº +0.5%');}}
      if(checked.has('vp_conveni')){
        let c=hasPlatPref?8.0:hasCard?8.0:2.0;
        let extra='';
        if(checked.has('vp_family'))extra+='ï¼‹å®¶æ—ãƒã‚¤ãƒ³ãƒˆæœ€å¤§+5%';
        if(checked.has('smbc_bank')||checked.has('sbi_sec'))extra+='ï¼‹Vãƒã‚¤ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ—ãƒ­ã‚°ãƒ©ãƒ ';
        benefits.push({icon:'ğŸª',text:`<strong>å¯¾è±¡ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»é£²é£Ÿåº—</strong>ï¼šã‚¹ãƒãƒ›ã‚¿ãƒƒãƒæ±ºæ¸ˆã§æœ€å¤§<strong>${c}%</strong>é‚„å…ƒ${extra}ï¼ˆåˆè¨ˆæœ€å¤§20%ï¼‰`});
      }
      if(checked.has('vp_family'))benefits.push({icon:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',text:'<strong>å®¶æ—ãƒã‚¤ãƒ³ãƒˆ</strong>ï¼šå®¶æ—1äººç™»éŒ²ã”ã¨ã«å¯¾è±¡åº—èˆ—+1%ï¼ˆæœ€å¤§+5%ï¼‰'});
      if(checked.has('vp_tsumitate'))benefits.push({icon:'ğŸ’°',text:'<strong>Vãƒã‚¤ãƒ³ãƒˆæŠ•è³‡</strong>ï¼šè²¯ã¾ã£ãŸãƒã‚¤ãƒ³ãƒˆã§æŠ•è³‡ä¿¡è¨—ã‚’è³¼å…¥å¯èƒ½'});
      if(!hasCard)rate=checked.size>0?0.5:0;
      let annualPts=Math.round(monthly.card*(rate/100)*12);
      if(checked.has('vp_conveni')){let cr=hasCard?0.08:0.02;if(checked.has('vp_family'))cr+=0.03;annualPts+=Math.round(20000*cr*12);}
      if(hasGold)annualPts+=10000;
      if(hasPlatPref)annualPts+=40000;
      return {rate:Math.min(rate,10),benefits,breakdown,annualPts};
    }
  }
};

// ============ UI LOGIC ============
let activeTab='docomo';

function switchTab(eco){
  activeTab=eco;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.querySelector(`.tab-btn[data-eco="${eco}"]`).classList.add('active');
  document.querySelectorAll('.eco-panel').forEach(p=>p.classList.remove('active'));
  document.getElementById(`panel-${eco}`).classList.add('active');
}

function getMonthly(){
  return {
    card:parseInt(document.getElementById('monthlyCard').value)||0,
    qr:parseInt(document.getElementById('monthlyQR').value)||0,
    net:parseInt(document.getElementById('monthlyNet').value)||0,
  };
}

function getCheckedServices(eco){
  const s=new Set();
  document.querySelectorAll(`input[data-eco="${eco}"]:checked`).forEach(c=>s.add(c.dataset.svc));
  return s;
}

function fmt(n){return n.toLocaleString('ja-JP');}

function recalc(){
  const monthly=getMonthly();
  const results={};
  for(const[key,eco]of Object.entries(ecosystems)){
    const checked=getCheckedServices(key);
    results[key]=eco.calc(checked,monthly);
    results[key].checked=checked;
    document.getElementById(`rate-${key}`).innerHTML=`${results[key].rate.toFixed(1)}<span class="pct">${results[key].isSpuRate?'å€':'%'}</span>`;
    const bd=document.getElementById(`breakdown-${key}`);
    bd.textContent=results[key].breakdown.length>0?results[key].breakdown.join(' + '):(results[key].isSpuRate?'SPUåŸºæœ¬ 1å€':'æœªé¸æŠ');
    const bf=document.getElementById(`benefits-${key}`);
    bf.innerHTML=results[key].benefits.length>0?results[key].benefits.map(b=>`<div class="benefit-item"><span class="b-icon">${b.icon}</span><span class="b-text">${b.text}</span></div>`).join(''):'<div class="no-selection">ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ç‰¹å…¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>';
    document.getElementById(`annual-${key}`).textContent=`${fmt(results[key].annualPts)} pt`;
    document.getElementById(`annual-sub-${key}`).textContent=`â‰’ å¹´é–“ç´„ ${fmt(results[key].annualPts)} å††ç›¸å½“`;
  }
  updateComparison(results);
  updateRecommendation(results);
}

function updateComparison(results){
  const c=document.getElementById('comparison-bars');
  const sorted=Object.entries(results).sort((a,b)=>b[1].annualPts-a[1].annualPts);
  const maxPts=Math.max(...sorted.map(([,r])=>r.annualPts),1);
  const bestKey=sorted[0][0];
  c.innerHTML=sorted.map(([key,r])=>{
    const pct=(r.annualPts/maxPts*100).toFixed(1);
    return `<div class="comp-row ${key===bestKey&&r.annualPts>0?'is-best':''}" data-eco="${key}"><div class="comp-label">${ecosystems[key].name}</div><div class="comp-bar-bg"><div class="comp-bar-fill" style="width:${Math.max(pct,4)}%">${r.rate.toFixed(1)}${r.isSpuRate?'å€':'%'}</div></div><div class="comp-annual">${fmt(r.annualPts)} pt/å¹´</div></div>`;
  }).join('');
}

function updateRecommendation(results){
  const c=document.getElementById('rec-content');
  const entries=Object.entries(results);
  if(!entries.some(([,r])=>r.checked.size>0)){c.innerHTML='<div class="no-selection">å„çµŒæ¸ˆåœã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠã™ã‚‹ã¨ã€æœ€é©ãªçµŒæ¸ˆåœã‚’ææ¡ˆã—ã¾ã™</div>';return;}
  const best=entries.reduce((a,b)=>a[1].annualPts>b[1].annualPts?a:b);
  const[bk,br]=best;
  const bn=ecosystems[bk].name;
  const reasons={
    docomo:`dã‚«ãƒ¼ãƒ‰PLATINUM/GOLDã¨ãƒ‰ã‚³ãƒ¢MAX/ãƒã‚¤æ´»ãƒ—ãƒ©ãƒ³ã®çµ„ã¿åˆã‚ã›ã§é€šä¿¡è²»ã‹ã‚‰ã‚‚å¤§é‡ãƒã‚¤ãƒ³ãƒˆç²å¾—ã€‚å¹´é–“ <strong>${fmt(br.annualPts)}pt</strong> ã®ç²å¾—ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚`,
    au:`ãƒãƒæ´»2ãƒ—ãƒ©ãƒ³ã¨au PAYã‚´ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒ»auã˜ã¶ã‚“éŠ€è¡Œã®é€£æºã§ã€æ±ºæ¸ˆï¼‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒãƒƒã‚¯ã®ãƒ€ãƒ–ãƒ«ãƒ¡ãƒªãƒƒãƒˆã€‚å¹´é–“ <strong>${fmt(br.annualPts)}pt</strong> ç›¸å½“ã®ç²å¾—ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚`,
    paypay:`PayPayã®é«˜é‚„å…ƒç‡ã¨Yahoo!ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã®ç›¸ä¹—åŠ¹æœãŒå¼·åŠ›ã€‚å¹´é–“ <strong>${fmt(br.annualPts)}pt</strong> ã®ç²å¾—ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚`,
    rakuten:`æ¥½å¤©å¸‚å ´ã§ã®SPUé‚„å…ƒç‡ãŒ <strong>${br.rate.toFixed(1)}å€</strong> ã¨é«˜ãã€ãƒãƒƒãƒˆé€šè²©ãƒ¡ã‚¤ãƒ³ã®æ–¹ã«æœ€é©ã€‚å¹´é–“ <strong>${fmt(br.annualPts)}pt</strong> ã®ç²å¾—ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚`,
    vpoint:`ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»é£²é£Ÿåº—ã§ã‚¹ãƒãƒ›ã‚¿ãƒƒãƒæ±ºæ¸ˆæœ€å¤§20%é‚„å…ƒã¨SBIè¨¼åˆ¸é€£æºãŒé­…åŠ›ã€‚å¹´é–“ <strong>${fmt(br.annualPts)}pt</strong> ã®ç²å¾—ãŒè¦‹è¾¼ã‚ã¾ã™ã€‚`
  };
  let reason=reasons[bk];
  const sorted=entries.sort((a,b)=>b[1].annualPts-a[1].annualPts);
  if(sorted.length>1&&sorted[1][1].annualPts>0) reason+=`<br><br>æ¬¡ç‚¹ã¯ <strong>${ecosystems[sorted[1][0]].name}çµŒæ¸ˆåœ</strong>ï¼ˆå¹´é–“ ${fmt(sorted[1][1].annualPts)}ptï¼‰ã§ã™ã€‚`;
  c.innerHTML=`<div class="rec-badge" data-eco="${bk}">ğŸ† ${bn}çµŒæ¸ˆåœ</div><div class="rec-reason">${reason}</div>`;
}

function resetAll(){
  document.querySelectorAll('input[type="checkbox"]').forEach(c=>c.checked=false);
  document.getElementById('monthlyCard').value=100000;
  document.getElementById('monthlyQR').value=30000;
  document.getElementById('monthlyNet').value=30000;
  recalc();
}

['monthlyCard','monthlyQR','monthlyNet'].forEach(id=>{document.getElementById(id).addEventListener('input',recalc);});

// Card mutual exclusion
document.querySelectorAll('input[type="checkbox"]').forEach(cb=>{
  cb.addEventListener('change',function(){
    const eco=this.dataset.eco, svc=this.dataset.svc;
    const ex={docomo:[['dcard_platinum','dcard','dcard_goldu','dcardnormal'],['docomo_max','docomo_poikatsu20','ahamo','docomo_mini']],au:[['aupay_gold','aupay_card'],['manekatsu2','au_mobile']],paypay:[['pp_card','pp_gold']],rakuten:[['r_card','r_premium']],vpoint:[['olive','olive_gold','olive_platpref']]};
    if(this.checked&&ex[eco])ex[eco].forEach(group=>{if(group.includes(svc)){group.forEach(s=>{if(s!==svc){const oc=document.querySelector(`input[data-svc="${s}"]`);if(oc)oc.checked=false;}});}});
  });
});

recalc();
</script>

</body>
</html>
